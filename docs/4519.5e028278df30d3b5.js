"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4519],{8663:(S,h,o)=>{o.d(h,{i:()=>C});var c=o(467),u=o(177),v=o(2902),i=o(4742),s=o(5079),l=o(5873),r=o(4843),a=o(5784),t=o(4438),E=o(7106),d=o(3103),_=o(2553),F=o(2705),p=o(2177);function g(f,m){if(1&f){const D=t.RV6();t.j41(0,"div",5),t.bIt("click",function(){t.eBV(D);const n=t.XpG();return t.Njj(n.onEdit())}),t.nrm(1,"ion-img",8),t.k0s()}}function M(f,m){if(1&f&&(t.qex(0),t.j41(1,"p")(2,"strong"),t.EFF(3,"Km sa\xedda:"),t.k0s(),t.EFF(4),t.k0s(),t.j41(5,"p")(6,"strong"),t.EFF(7,"Km retorno:"),t.k0s(),t.EFF(8),t.k0s(),t.j41(9,"p")(10,"strong"),t.EFF(11,"Observa\xe7\xf5es:"),t.k0s(),t.EFF(12),t.k0s(),t.bVm()),2&f){const D=t.XpG();t.R7$(4),t.SpI(" ",D.dataForRead.quilometragemNaSaida," "),t.R7$(4),t.SpI(" ",D.dataForRead.quilometragemNoRetorno," "),t.R7$(4),t.SpI(" ",D.dataForRead.obs," ")}}let C=(()=>{var f;class m{constructor(e,n,O,R,P,A){this.frotaCarSrv=e,this.frotaMotivoSrv=n,this.frotaDestinoSrv=O,this.funcSrv=R,this.router=P,this.dataSharedCardSrv=A,this.hideButtonActions=!1,this.isFinished=!1,this.appRoutes=a.S,this.status="yellow",this.dataForRead={imobilizado:"",nomefuncionario:"",destino:"",motivo:"",obs:"",quilometragemNaSaida:null,quilometragemNoRetorno:null},(0,s.a)({"create-outline":l.hmR,"flag-outline":l.NBP})}ngOnInit(){var e=this;return(0,c.A)(function*(){try{e.dataForRead.id=e.data.id,e.dataForRead.dataHoraSaida=e.data.dataHoraSaida,e.dataForRead.dataHoraRetorno=e.data.dataHoraRetorno;const[n,O,R,P]=yield Promise.all([e.getImobilizado(),e.getNomeFuncionario(),e.getMotivo(),e.getDestino()]);e.dataForRead.imobilizado=n||"Descri\xe7\xe3o n\xe3o encontrada",e.dataForRead.nomefuncionario=O||"Funcion\xe1rio n\xe3o encontrado",e.dataForRead.motivo=R||"Motivo n\xe3o encontrado",e.dataForRead.destino=P||"Destino n\xe3o encontrado",e.dataForRead.quilometragemNaSaida=e.data.quilometragemNaSaida,e.dataForRead.quilometragemNoRetorno=e.data.quilometragemNoRetorno,e.dataForRead.obs=e.data.obs,e.dataForRead.dataHoraRetorno&&(e.status="red")}catch(n){console.error("Erro ao inicializar dados",n)}})()}onEdit(){this.dataSharedCardSrv.setData(this.data);const e=this.appRoutes.getPath(this.appRoutes.formEdit,{id:this.data.id});this.router.navigate([e])}onFinish(){let e;this.dataSharedCardSrv.setData(this.data),e=this.appRoutes.getPath(this.data.dataHoraRetorno?this.appRoutes.finish:this.appRoutes.formClose,{id:this.data.id}),this.router.navigate([e])}getImobilizado(){var e=this;return(0,c.A)(function*(){try{return(yield(0,r._)(e.frotaCarSrv.getById(e.data.imobilizadoCod))).descricao}catch(n){return console.error("Erro ao obter imobilizado:",n),null}})()}getNomeFuncionario(){var e=this;return(0,c.A)(function*(){try{return(yield(0,r._)(e.funcSrv.getById(e.data.funcCod))).name||null}catch(n){return console.error("Erro ao obter nome do funcion\xe1rio:",n),null}})()}getMotivo(){var e=this;return(0,c.A)(function*(){try{return(yield(0,r._)(e.frotaMotivoSrv.getById(e.data.motivoSeq))).descricao}catch(n){return console.error("Erro ao obter motivo:",n),null}})()}getDestino(){var e=this;return(0,c.A)(function*(){try{return(yield(0,r._)(e.frotaDestinoSrv.getById(e.data.destinoSeq))).descricao}catch(n){return console.error("Erro ao obter destino:",n),null}})()}}return(f=m).\u0275fac=function(e){return new(e||f)(t.rXU(E.T),t.rXU(d.i),t.rXU(_.G),t.rXU(F.r),t.rXU(v.Ix),t.rXU(p.w))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-card"]],inputs:{data:"data",hideButtonActions:"hideButtonActions",isFinished:"isFinished"},standalone:!0,features:[t.aNF],decls:37,vars:16,consts:[["size","10"],["size","2",1,"icon-box"],["class","icon-width",3,"click",4,"ngIf"],[1,"ion-no-padding"],[4,"ngIf"],[1,"icon-width",3,"click"],["src","assets/flag.png"],[1,"retangulo"],["src","assets/edit.png"]],template:function(e,n){1&e&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-row")(3,"ion-col",0)(4,"ion-card-subtitle"),t.EFF(5),t.k0s(),t.j41(6,"ion-card-title"),t.EFF(7),t.k0s()(),t.j41(8,"ion-col",1),t.DNE(9,g,2,0,"div",2),t.k0s()()(),t.j41(10,"ion-card-content")(11,"ion-grid",3)(12,"ion-row")(13,"ion-col",0)(14,"p")(15,"strong"),t.EFF(16,"Motivo da sa\xedda:"),t.k0s(),t.EFF(17),t.k0s(),t.j41(18,"p")(19,"strong"),t.EFF(20,"Destino:"),t.k0s(),t.EFF(21),t.k0s(),t.j41(22,"p")(23,"strong"),t.EFF(24,"Data sa\xedda:"),t.k0s(),t.EFF(25),t.nI1(26,"date"),t.k0s(),t.j41(27,"p")(28,"strong"),t.EFF(29,"Data retorno:"),t.k0s(),t.EFF(30),t.nI1(31,"date"),t.k0s(),t.DNE(32,M,13,3,"ng-container",4),t.k0s(),t.j41(33,"ion-col",1)(34,"div",5),t.bIt("click",function(){return n.onFinish()}),t.nrm(35,"ion-img",6)(36,"div",7),t.k0s()()()()()()),2&e&&(t.R7$(5),t.JRh(n.dataForRead.nomefuncionario),t.R7$(2),t.JRh(n.dataForRead.imobilizado),t.R7$(2),t.Y8G("ngIf",!n.dataForRead.dataHoraRetorno&&!n.hideButtonActions),t.R7$(8),t.SpI(" ",n.dataForRead.motivo,""),t.R7$(4),t.SpI(" ",n.dataForRead.destino,""),t.R7$(4),t.SpI(" ",t.i5U(26,10,n.dataForRead.dataHoraSaida,"dd/MM/yyyy, HH:mm"),""),t.R7$(5),t.SpI(" ",t.i5U(31,13,n.dataForRead.dataHoraRetorno,"dd/MM/yyyy, HH:mm")," "),t.R7$(2),t.Y8G("ngIf",n.dataForRead.dataHoraRetorno&&n.isFinished),t.R7$(4),t.xc7("background-color",n.status))},dependencies:[i.bv,i.b_,i.I9,i.ME,i.HW,i.tN,i.hU,i.lO,i.KW,i.ln,v.iI,u.MD,u.bT,u.vh],styles:["[_nghost-%COMP%]{display:block;max-width:800px;margin:0 auto}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:12px;--padding-top: 7px;--padding-end: 8px;--padding-bottom: 8px;--padding-start: 8px;border-radius:8px}[_nghost-%COMP%]   .icon-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .icon-box[_ngcontent-%COMP%]   .icon-width[_ngcontent-%COMP%]{width:27px}[_nghost-%COMP%]   .retangulo[_ngcontent-%COMP%]{margin-top:3px;width:100%;height:4px}"]}),m})()},2553:(S,h,o)=>{o.d(h,{G:()=>v});var c=o(4438),u=o(9684);let v=(()=>{var i;class s{constructor(r){this.baseApiService=r,this.endpoint="api/DestinoFrota"}getById(r){return this.baseApiService.get(`${this.endpoint}/GetById/${r}`)}getAll(){return this.baseApiService.get(`${this.endpoint}/GetAll`)}save(r){return this.baseApiService.post(`${this.endpoint}/Save`,r)}update(r,a){return this.baseApiService.post(`${this.endpoint}/Update/${r}`,a)}}return(i=s).\u0275fac=function(r){return new(r||i)(c.KVO(u.v))},i.\u0275prov=c.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),s})()},3103:(S,h,o)=>{o.d(h,{i:()=>v});var c=o(4438),u=o(9684);let v=(()=>{var i;class s{constructor(r){this.baseApiService=r,this.endpoint="api/MotivoSaidaFrota"}getById(r){return this.baseApiService.get(`${this.endpoint}/GetById/${r}`)}getAll(){return this.baseApiService.get(`${this.endpoint}/GetAll`)}save(r){return this.baseApiService.post(`${this.endpoint}/Save`,r)}update(r,a){return this.baseApiService.post(`${this.endpoint}/Update/${r}`,a)}}return(i=s).\u0275fac=function(r){return new(r||i)(c.KVO(u.v))},i.\u0275prov=c.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),s})()},9457:(S,h,o)=>{o.d(h,{g:()=>i});var c=o(1626),u=o(4438),v=o(9684);let i=(()=>{var s;class l{constructor(a){this.baseApiService=a,this.endpoint="api/SaidaFrota"}getById(a){return this.baseApiService.get(`${this.endpoint}/GetById/${a}`)}getAll(a,t){return this.baseApiService.get(`${this.endpoint}/GetAllPaginated?page=${a}&pageSize=${t}`)}getAllBy(a){let t=new c.Nl;if(a&&Object.keys(a)){for(const E in a)a.hasOwnProperty(E)&&(t=t.set(E,a[E]));return this.baseApiService.get(`${this.endpoint}/GetAllBy`,t)}return this.baseApiService.get(`${this.endpoint}/GetAllBy`)}save(a){return this.baseApiService.post(`${this.endpoint}/Save`,a)}update(a,t){return this.baseApiService.post(`${this.endpoint}/Update/${a}`,t)}}return(s=l).\u0275fac=function(a){return new(a||s)(u.KVO(v.v))},s.\u0275prov=u.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),l})()},7106:(S,h,o)=>{o.d(h,{T:()=>r});var c=o(4412),u=o(7673),v=o(8141),i=o(1985),s=o(4438),l=o(9684);let r=(()=>{var a;class t{constructor(d){this.baseApiService=d,this.endpoint="api/CarFrota",this.veiculoSubject=new c.t(null),this.veiculos$=this.veiculoSubject.asObservable()}getAll(){const d=this.getCachedVeiculos();return d?(0,u.of)(d):this.baseApiService.get(`${this.endpoint}/GetAll`).pipe((0,v.M)(_=>{this.veiculoSubject.next(_)}))}getCachedVeiculos(){return this.veiculoSubject.value}clearCache(){this.veiculoSubject.next(null)}getById(d){return new i.c(_=>{const F=this.getCachedVeiculos();if(F){const p=F.find(g=>g.id===d);if(p)return _.next(p),void _.complete()}this.getAll().subscribe({next:p=>{const g=p.find(M=>M.id===d);g?_.next(g):_.error(new Error(`Ve\xedculo com ID ${d} n\xe3o encontrado.`)),_.complete()},error:p=>{_.error(p)}})})}getAllWithoutRoutesOpen(){return this.baseApiService.get(`${this.endpoint}/GetAllWithoutRoutesOpen`)}}return(a=t).\u0275fac=function(d){return new(d||a)(s.KVO(l.v))},a.\u0275prov=s.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),t})()},2705:(S,h,o)=>{o.d(h,{r:()=>r});var c=o(4412),u=o(7673),v=o(1985),i=o(8141),s=o(4438),l=o(9684);let r=(()=>{var a;class t{constructor(d){this.baseApiService=d,this.endpoint="api/Funcionario",this.funcionariosSubject=new c.t(null),this.funcionarios$=this.funcionariosSubject.asObservable()}getAll(){const d=this.getCachedFuncionarios();return d?(0,u.of)(d):this.baseApiService.get(`${this.endpoint}/GetAll`).pipe((0,i.M)(_=>{this.funcionariosSubject.next(_)}))}getCachedFuncionarios(){return this.funcionariosSubject.value}clearCache(){this.funcionariosSubject.next(null)}getById(d){return new v.c(_=>{const F=this.getCachedFuncionarios();if(F){const p=F.find(g=>g.id===d);if(p)return _.next(p),void _.complete()}this.getAll().subscribe({next:p=>{const g=p.find(M=>M.id===d);g?_.next(g):_.error(new Error(`Funcion\xe1rio com ID ${d} n\xe3o encontrado.`)),_.complete()},error:p=>{_.error(p)}})})}}return(a=t).\u0275fac=function(d){return new(d||a)(s.KVO(l.v))},a.\u0275prov=s.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),t})()},2177:(S,h,o)=>{o.d(h,{w:()=>v});var c=o(4412),u=o(4438);let v=(()=>{var i;class s{constructor(){this.dataSubject=new c.t(null),this.data$=this.dataSubject.asObservable()}setData(r){this.dataSubject.next(r)}getData(){return this.dataSubject.value}}return(i=s).\u0275fac=function(r){return new(r||i)},i.\u0275prov=u.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),s})()},4843:(S,h,o)=>{o.d(h,{_:()=>v});var c=o(9350),u=o(7707);function v(i,s){const l="object"==typeof s;return new Promise((r,a)=>{const t=new u.Ms({next:E=>{r(E),t.unsubscribe()},error:a,complete:()=>{l?r(s.defaultValue):a(new c.G)}});i.subscribe(t)})}}}]);