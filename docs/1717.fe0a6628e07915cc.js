"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1717],{1717:(U,g,s)=>{s.r(g),s.d(g,{ListPage:()=>Q});var d=s(467),c=s(177),_=s(4341),m=s(2902),l=s(4742),v=s(5079),h=s(5873),F=s(5964),f=s(4843),b=s(8663),t=s(4438);const I=["*"];function j(n,r){if(1&n&&(t.qex(0),t.j41(1,"ion-buttons",1),t.nrm(2,"ion-back-button",2),t.k0s(),t.bVm()),2&n){const e=t.XpG();t.R7$(2),t.Y8G("color",e.colorButtons)("defaultHref",e.defaultHrefBackButton)("text",e.textBackButton)}}let k=(()=>{var n;class r{constructor(){this.showBackButton=!0,this.colorButtons="primary",this.defaultHrefBackButton="home",this.textBackButton="Sair"}ngOnInit(){console.log()}}return(n=r).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["app-frota-footer"]],inputs:{showBackButton:"showBackButton",colorButtons:"colorButtons",defaultHrefBackButton:"defaultHrefBackButton",textBackButton:"textBackButton"},standalone:!0,features:[t.aNF],ngContentSelectors:I,decls:4,vars:1,consts:[[4,"ngIf"],["slot","start"],[3,"color","defaultHref","text"]],template:function(i,o){1&i&&(t.NAR(),t.j41(0,"ion-footer")(1,"ion-toolbar"),t.DNE(2,j,3,3,"ng-container",0),t.SdG(3),t.k0s()()),2&i&&(t.R7$(2),t.Y8G("ngIf",o.showBackButton))},dependencies:[c.MD,c.bT,l.bv,l.QW,l.M0,l.ai,l.el,m.iI]}),r})();function B(n,r){if(1&n){const e=t.RV6();t.j41(0,"ion-item",3),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(3);return t.Njj(a.selectItem(o))}),t.EFF(1),t.k0s()}if(2&n){const e=r.$implicit,i=t.XpG(3);t.R7$(),t.SpI(" ",e[i.labelKey]," ")}}function P(n,r){if(1&n&&(t.j41(0,"ion-list"),t.DNE(1,B,2,1,"ion-item",6),t.nI1(2,"slice"),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.brH(2,1,e.filteredItems,0,5))}}function S(n,r){1&n&&(t.j41(0,"ion-text"),t.EFF(1," Nenhum resultado encontrado. "),t.k0s())}function C(n,r){if(1&n){const e=t.RV6();t.j41(0,"ion-content",1)(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",2)(4,"ion-button",3),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closePopover())}),t.EFF(5,"Voltar"),t.k0s()()()(),t.j41(6,"ion-searchbar",4),t.mxI("ngModelChange",function(o){t.eBV(e);const a=t.XpG();return t.DH7(a.searchQuery,o)||(a.searchQuery=o),t.Njj(o)}),t.bIt("ionInput",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.filterItems())}),t.k0s(),t.DNE(7,P,3,5,"ion-list",5)(8,S,2,0,"ion-text",5),t.k0s()}if(2&n){const e=t.XpG();t.R7$(6),t.R50("ngModel",e.searchQuery),t.R7$(),t.Y8G("ngIf",e.filteredItems.length>0),t.R7$(),t.Y8G("ngIf",0===e.filteredItems.length&&e.searchQuery)}}let D=(()=>{var n;class r{constructor(){this.isPopoverOpen=!1,this.items=[],this.label="",this.placeholder="Buscar",this.itemSelected=new t.bkB,this.popoverClosed=new t.bkB,this.itemSelectedView=null,this.searchQuery="",this.filteredItems=[]}filterItems(){const i=this.searchQuery.toLowerCase();this.filteredItems=this.items.filter(o=>{var a;return null===(a=o[this.labelKey])||void 0===a?void 0:a.toLowerCase().includes(i)})}selectItem(i){this.itemSelected.emit(i),this.itemSelectedView=i,this.searchQuery="",this.filteredItems=[],this.closePopover()}closePopover(){this.popoverClosed.emit()}removeItem(){this.itemSelected.emit(null),this.itemSelectedView=null}}return(n=r).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["app-searchable-filter"]],inputs:{isPopoverOpen:"isPopoverOpen",popoverEvent:"popoverEvent",items:"items",labelKey:"labelKey",label:"label",placeholder:"placeholder"},outputs:{itemSelected:"itemSelected",popoverClosed:"popoverClosed"},standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[["showBackdrop","true","backdropDismiss","false",3,"ionDidDismiss","isOpen","event"],[1,"popover-content"],["slot","start"],[3,"click"],["placeholder","Buscar Motorista",3,"ngModelChange","ionInput","ngModel"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"]],template:function(i,o){1&i&&(t.j41(0,"ion-popover",0),t.bIt("ionDidDismiss",function(){return o.isPopoverOpen=!1}),t.DNE(1,C,9,3,"ng-template"),t.k0s()),2&i&&t.Y8G("isOpen",o.isPopoverOpen)("event",o.popoverEvent)},dependencies:[c.MD,c.Sq,c.bT,c.P9,l.bv,l.Jm,l.QW,l.W9,l.eU,l.uz,l.nf,l.S1,l.IO,l.ai,l.CF,l.Gw,_.YN,_.BC,_.vS]}),r})();var G=s(5784),y=s(9457),R=s(7106),A=s(2705);const x=["modalFiltro"];function T(n,r){if(1&n){const e=t.RV6();t.j41(0,"ion-button",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.clearFilterByProperty("motoristaId"))}),t.EFF(1),t.nrm(2,"ion-icon",18),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("fill","outline"),t.R7$(),t.SpI(" Motorista: ",e.getPropById(e.filtroAtual.motoristaId,e.allMotoristas,"name")," ")}}function M(n,r){if(1&n){const e=t.RV6();t.j41(0,"ion-button",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.clearFilterByProperty("veiculoId"))}),t.EFF(1),t.nrm(2,"ion-icon",18),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("fill","outline"),t.R7$(),t.SpI(" Ve\xedculo: ",e.getPropById(e.filtroAtual.veiculoId,e.allVeiculos,"descricao")," ")}}function E(n,r){if(1&n){const e=t.RV6();t.j41(0,"ion-button",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.clearFilterByProperty("status"))}),t.EFF(1),t.nrm(2,"ion-icon",18),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("fill","outline"),t.R7$(),t.SpI(" Status: ",e.getTipo(e.filtroAtual.status)," ")}}function V(n,r){if(1&n){const e=t.RV6();t.j41(0,"ion-button",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.clearFilterByProperty("tipoDataFiltro"))}),t.EFF(1),t.nrm(2,"ion-icon",18),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("fill","outline"),t.R7$(),t.SpI(" Tipo de Data: ",e.getTipoData(e.filtroAtual.tipoDataFiltro)," ")}}function N(n,r){if(1&n&&(t.j41(0,"div",15),t.DNE(1,T,3,2,"ion-button",16)(2,M,3,2,"ion-button",16)(3,E,3,2,"ion-button",16)(4,V,3,2,"ion-button",16),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.filtroAtual.motoristaId),t.R7$(),t.Y8G("ngIf",e.filtroAtual.veiculoId),t.R7$(),t.Y8G("ngIf",e.filtroAtual.status),t.R7$(),t.Y8G("ngIf",e.filtroAtual.tipoDataFiltro)}}function L(n,r){1&n&&t.nrm(0,"app-card",19),2&n&&t.Y8G("data",r.$implicit)}function O(n,r){if(1&n&&(t.j41(0,"ion-select-option",25),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.descricao," ")}}function X(n,r){if(1&n){const e=t.RV6();t.j41(0,"ion-content")(1,"ion-datetime",36,1),t.bIt("ionChange",function(){t.eBV(e);const o=t.sdS(2),a=t.XpG(3);return t.Njj(a.filtroAtual.de=o.value)}),t.k0s()()}}function $(n,r){if(1&n){const e=t.RV6();t.j41(0,"ion-content")(1,"ion-datetime",36,2),t.bIt("ionChange",function(){t.eBV(e);const o=t.sdS(2),a=t.XpG(3);return t.Njj(a.filtroAtual.ate=o.value)}),t.k0s()()}}function Y(n,r){if(1&n&&(t.qex(0),t.j41(1,"ion-item",32)(2,"ion-label"),t.EFF(3,"De"),t.k0s(),t.j41(4,"ion-text",5),t.EFF(5),t.nI1(6,"date"),t.k0s(),t.j41(7,"ion-modal",33),t.DNE(8,X,3,0,"ng-template"),t.k0s()(),t.j41(9,"ion-item",34)(10,"ion-label"),t.EFF(11,"At\xe9"),t.k0s(),t.j41(12,"ion-text",5),t.EFF(13),t.nI1(14,"date"),t.k0s(),t.j41(15,"ion-modal",35),t.DNE(16,$,3,0,"ng-template"),t.k0s()(),t.bVm()),2&n){const e=t.XpG(2);t.R7$(5),t.JRh(t.i5U(6,2,e.filtroAtual.de,"dd/MM/yyyy")),t.R7$(8),t.JRh(t.i5U(14,5,e.filtroAtual.ate,"dd/MM/yyyy"))}}function H(n,r){if(1&n){const e=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Filtros"),t.k0s()()(),t.j41(4,"ion-content",20)(5,"ion-input",21),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.isPopoverOpen=!0)}),t.k0s(),t.j41(6,"ion-select",22),t.mxI("ngModelChange",function(o){t.eBV(e);const a=t.XpG();return t.DH7(a.filtroAtual.veiculoId,o)||(a.filtroAtual.veiculoId=o),t.Njj(o)}),t.DNE(7,O,2,2,"ion-select-option",23),t.k0s(),t.j41(8,"ion-select",24),t.mxI("ngModelChange",function(o){t.eBV(e);const a=t.XpG();return t.DH7(a.filtroAtual.status,o)||(a.filtroAtual.status=o),t.Njj(o)}),t.nrm(9,"ion-select-option",25),t.j41(10,"ion-select-option",25),t.EFF(11,"Sa\xedda"),t.k0s(),t.j41(12,"ion-select-option",25),t.EFF(13,"Retorno"),t.k0s()(),t.j41(14,"div",26)(15,"ion-select",27),t.mxI("ngModelChange",function(o){t.eBV(e);const a=t.XpG();return t.DH7(a.filtroAtual.tipoDataFiltro,o)||(a.filtroAtual.tipoDataFiltro=o),t.Njj(o)}),t.nrm(16,"ion-select-option",25),t.j41(17,"ion-select-option",25),t.EFF(18,"Data de sa\xedda"),t.k0s(),t.j41(19,"ion-select-option",25),t.EFF(20,"Data de retorno"),t.k0s()(),t.DNE(21,Y,17,8,"ng-container",28),t.k0s()(),t.j41(22,"ion-footer")(23,"ion-toolbar")(24,"ion-buttons",29)(25,"ion-button",30),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.clearFilter())}),t.EFF(26,"Cancelar"),t.k0s()(),t.j41(27,"ion-buttons",5)(28,"ion-button",31),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.filter())}),t.EFF(29,"Confirmar"),t.k0s()()()()}if(2&n){const e=t.XpG();t.R7$(5),t.Y8G("value",e.filtroAtual.motoristaId?e.getPropById(e.filtroAtual.motoristaId,e.allMotoristas,"name"):""),t.R7$(),t.R50("ngModel",e.filtroAtual.veiculoId),t.R7$(),t.Y8G("ngForOf",e.allVeiculos),t.R7$(),t.R50("ngModel",e.filtroAtual.status),t.R7$(),t.Y8G("value",-1),t.R7$(),t.Y8G("value",0),t.R7$(2),t.Y8G("value",1),t.R7$(3),t.R50("ngModel",e.filtroAtual.tipoDataFiltro),t.R7$(),t.Y8G("value",-1),t.R7$(),t.Y8G("value",0),t.R7$(2),t.Y8G("value",1),t.R7$(2),t.Y8G("ngIf",void 0!==e.filtroAtual.tipoDataFiltro&&-1!==e.filtroAtual.tipoDataFiltro)}}let Q=(()=>{var n;class r{constructor(i,o,a,u,p){this.frotaSaidaService=i,this.frotaVeiculoService=o,this.funcionarioService=a,this.router=u,this.loadingCtrl=p,this.isPopoverOpen=!1,this.listaSaidaFrota=[],this.appRoutes=G.S,this.filtroAtual={motoristaId:void 0,veiculoId:void 0,status:void 0,tipoDataFiltro:void 0,de:void 0,ate:void 0},(0,v.a)({funnel:h.XNy,close:h.VNx})}ngOnInit(){var i=this;return(0,d.A)(function*(){i.routeSubscription=i.router.events.pipe((0,F.p)(o=>o instanceof m.wF)).subscribe((0,d.A)(function*(){const o=yield i.loadingCtrl.create();yield o.present(),yield i.loadData(),yield o.dismiss()}))})()}loadData(i){var o=this;return(0,d.A)(function*(){o.listaSaidaFrota=yield(0,f._)(o.frotaSaidaService.getAllBy({...i,limit:15})),o.allMotoristas=yield(0,f._)(o.funcionarioService.getAll()),o.allVeiculos=yield(0,f._)(o.frotaVeiculoService.getAll())})()}filter(){var i=this;return(0,d.A)(function*(){yield i.loadData(i.filtroAtual),i.modal.dismiss()})()}clearFilter(){this.filtroAtual={motoristaId:void 0,veiculoId:void 0,status:void 0,tipoDataFiltro:void 0,de:void 0,ate:void 0},this.filter()}clearFilterByProperty(i){this.filtroAtual[i]=void 0,this.filter()}getPropById(i,o,a){const u=null==o?void 0:o.find(p=>p.id===i);return u?u[a]:"N\xe3o encontrado"}loadMore(i){this.frotaSaidaService.getAllBy({...this.filtroAtual,limit:15,offset:this.listaSaidaFrota.length}).subscribe(o=>{this.listaSaidaFrota=[...this.listaSaidaFrota,...o],this.listaSaidaFrota.sort((a,u)=>new Date(u.dataHoraSaida).getTime()-new Date(a.dataHoraSaida).getTime()),i.target.complete(),o.length<this.listaSaidaFrota.length&&(i.target.disabled=!0)})}selectedMotorista(i){this.filtroAtual.motoristaId=i?i.id:void 0}openPopover(i){this.popoverEvent=i,this.isPopoverOpen=!0}getTipo(i){return 0===i?"SA\xcdDA":1===i?"RETORNO":""}getTipoData(i){return 0===i?"DATA DE SA\xcdDA":1===i?"DATA DE RETORNO":""}}return(n=r).\u0275fac=function(i){return new(i||n)(t.rXU(y.g),t.rXU(R.T),t.rXU(A.r),t.rXU(m.Ix),t.rXU(l.Xi))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-list"]],viewQuery:function(i,o){if(1&i&&t.GBs(x,5),2&i){let a;t.mGM(a=t.lsd())&&(o.modal=a.first)}},standalone:!0,features:[t.aNF],decls:19,vars:8,consts:[["modalFiltro",""],["popoverDatetimeDe",""],["popoverDatetimeAte",""],[3,"translucent"],["color","primary"],["slot","end"],["id","open-modal"],["slot","icon-only","name","funnel","color","light"],[3,"fullscreen"],["class","ion-text-center ion-padding",4,"ngIf"],[3,"data",4,"ngFor","ngForOf"],[3,"ionInfinite"],["trigger","open-modal"],[3,"defaultHrefBackButton"],["label","Motorista","labelKey","name",1,"ion-padding",3,"itemSelected","popoverClosed","isPopoverOpen","popoverEvent","items"],[1,"ion-text-center","ion-padding"],[3,"fill","click",4,"ngIf"],[3,"click","fill"],["slot","end","name","close"],[3,"data"],[1,"ion-padding"],["label","Motorista","labelPlacement","stacked","fill","outline","readonly","",3,"click","value"],["label","Ve\xedculo","labelPlacement","stacked","fill","outline",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["label","Status","labelPlacement","stacked","fill","outline",3,"ngModelChange","ngModel"],[3,"value"],[1,"filtro-data"],["label","Filtrar data por","labelPlacement","stacked","fill","outline",3,"ngModelChange","ngModel"],[4,"ngIf"],["slot","start"],["color","danger",3,"click"],["color","primary",3,"click"],["button","true","id","open-datetime-de"],["trigger","open-datetime-de",1,"de-datetime"],["button","true","id","open-datetime-ate"],["trigger","open-datetime-ate",1,"de-datetime"],["size","cover","presentation","date",3,"ionChange"]],template:function(i,o){if(1&i){const a=t.RV6();t.j41(0,"ion-header",3)(1,"ion-toolbar",4)(2,"ion-title"),t.EFF(3,"Consultar percursos"),t.k0s(),t.j41(4,"ion-buttons",5)(5,"ion-button",6),t.nrm(6,"ion-icon",7),t.k0s()()()(),t.j41(7,"ion-content",8),t.DNE(8,N,5,4,"div",9),t.j41(9,"div")(10,"ion-list"),t.DNE(11,L,1,1,"app-card",10),t.k0s(),t.j41(12,"ion-infinite-scroll",11),t.bIt("ionInfinite",function(p){return t.eBV(a),t.Njj(o.loadMore(p))}),t.nrm(13,"ion-infinite-scroll-content"),t.k0s()(),t.j41(14,"ion-modal",12,0),t.DNE(16,H,30,12,"ng-template"),t.k0s()(),t.nrm(17,"app-frota-footer",13),t.j41(18,"app-searchable-filter",14),t.bIt("itemSelected",function(p){return t.eBV(a),t.Njj(o.selectedMotorista(p))})("popoverClosed",function(){return t.eBV(a),t.Njj(o.isPopoverOpen=!1)}),t.k0s()}2&i&&(t.Y8G("translucent",!0),t.R7$(7),t.Y8G("fullscreen",!0),t.R7$(),t.Y8G("ngIf",o.filtroAtual.motoristaId||o.filtroAtual.veiculoId||o.filtroAtual.status||o.filtroAtual.tipoDataFiltro),t.R7$(3),t.Y8G("ngForOf",o.listaSaidaFrota),t.R7$(6),t.Y8G("defaultHrefBackButton",o.appRoutes.home.path),t.R7$(),t.Y8G("isPopoverOpen",o.isPopoverOpen)("popoverEvent",o.popoverEvent)("items",o.allMotoristas))},dependencies:[c.MD,c.Sq,c.bT,c.vh,l.bv,l.Jm,l.QW,l.W9,l.A9,l.M0,l.eU,l.iq,l.Ax,l.Hp,l.$w,l.uz,l.he,l.nf,l.Nm,l.Ip,l.IO,l.BC,l.ai,l.Sb,l.Je,l.Gw,m.iI,_.YN,_.BC,_.vS,b.i,k,D],styles:[".de-datetime[_ngcontent-%COMP%]{--width: 290px;--height: 382px;--border-radius: 8px}.de-datetime[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{height:auto;width:auto;max-width:350px}.de-datetime[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(288px,1fr));grid-gap:0 10px}.de-datetime[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{height:382px}"]}),r})()}}]);