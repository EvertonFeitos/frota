"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8105],{8105:(D,f,e)=>{e.r(f),e.d(f,{FinishPage:()=>X});var d=e(467),p=e(177),o=e(4742),E=e(8663),v=e(3469),l=e(5964),h=e(4843),u=e(2902),_=e(5079),P=e(5873),O=e(5784),n=e(4438),A=e(2177),M=e(3459),R=e(2705),C=e(9769),T=e(9457);function I(t,s){if(1&t&&(n.qex(0),n.nrm(1,"app-card",19),n.bVm()),2&t){const i=n.XpG();n.R7$(),n.Y8G("isFinished",!0)("data",i.dataSharedCard)}}function U(t,s){1&t&&n.eu8(0)}function B(t,s){1&t&&n.eu8(0)}function G(t,s){1&t&&n.eu8(0)}function x(t,s){1&t&&n.eu8(0)}function j(t,s){if(1&t&&(n.j41(0,"ion-item")(1,"ion-avatar"),n.nrm(2,"img",21),n.k0s(),n.j41(3,"ion-label"),n.EFF(4),n.k0s(),n.nrm(5,"ion-input",22),n.k0s()),2&t){const i=s.$implicit,a=n.XpG(2);n.R7$(2),n.Mz_("alt","Foto de acompanhante ",i.name,""),n.Y8G("src",a.fotosAcompanhantesSelecionados[i.id],n.B4B),n.R7$(2),n.JRh(i.name),n.R7$(),n.Y8G("disabled",!0)}}function y(t,s){if(1&t&&(n.j41(0,"ion-list"),n.DNE(1,j,6,5,"ion-item",20),n.k0s()),2&t){const i=n.XpG();n.R7$(),n.Y8G("ngForOf",i.acompanhantesSelecionadosSaida)}}function L(t,s){1&t&&(n.j41(0,"p",24)(1,"strong"),n.EFF(2,"Nenhum acompanhante selecionado."),n.k0s()())}function $(t,s){if(1&t&&n.DNE(0,L,3,0,"p",23),2&t){const i=n.XpG();n.Y8G("ngIf",i.acompanhantesSelecionadosSaida.length<1)}}function W(t,s){if(1&t&&(n.j41(0,"ion-item")(1,"ion-avatar"),n.nrm(2,"img",21),n.k0s(),n.j41(3,"ion-label"),n.EFF(4),n.k0s(),n.nrm(5,"ion-input",22),n.k0s()),2&t){const i=s.$implicit,a=n.XpG(2);n.R7$(2),n.Mz_("alt","Foto de acompanhante ",i.name,""),n.Y8G("src",a.fotosAcompanhantesSelecionados[i.id],n.B4B),n.R7$(2),n.JRh(i.name),n.R7$(),n.Y8G("disabled",!0)}}function K(t,s){if(1&t&&(n.j41(0,"ion-list"),n.DNE(1,W,6,5,"ion-item",20),n.k0s()),2&t){const i=n.XpG();n.R7$(),n.Y8G("ngForOf",i.acompanhantesSelecionadosRetorno)}}function b(t,s){1&t&&(n.j41(0,"p",24)(1,"strong"),n.EFF(2,"Nenhum acompanhante selecionado."),n.k0s()())}function Y(t,s){if(1&t&&n.DNE(0,b,3,0,"p",23),2&t){const i=n.XpG();n.Y8G("ngIf",i.acompanhantesSelecionadosRetorno.length<1)}}let X=(()=>{var t;class s{constructor(a,r,c,g,S,F,m){this.dataSharedCardSrv=a,this.acompanhanteFrotaSrv=r,this.funcionarioService=c,this.identificacaoFuncSrv=g,this.saidaFrotaSrv=S,this.router=F,this.route=m,this.appRoutes=O.S,this.acompanhantesSelecionadosSaida=[],this.acompanhantesSelecionadosRetorno=[],this.fotosAcompanhantesSelecionados={},this.id=null,this.srcFotoMotorista="assets/user.png",(0,_.a)({arrowBack:P.$$C})}ngOnInit(){var a=this;return(0,d.A)(function*(){var r;a.dataSharedCard=yield a.dataSharedCardSrv.getData(),yield a.updateRouteData(),a.id&&(a.acompanhantesSelecionadosSaida=yield a.carregarAcompanhantesSelecionados(a.id,v.E.Saida),a.acompanhantesSelecionadosRetorno=yield a.carregarAcompanhantesSelecionados(a.id,v.E.Retorno)),null!==(r=a.dataSharedCard)&&void 0!==r&&r.funcCod&&(a.srcFotoMotorista=yield a.getPhotoAcompanhante(a.dataSharedCard.funcCod)),a.routeSubscription=a.router.events.pipe((0,l.p)(c=>c instanceof u.wF)).subscribe((0,d.A)(function*(){return yield a.updateRouteData()}))})()}updateRouteData(){var a=this;return(0,d.A)(function*(){a.id=Number(a.route.snapshot.paramMap.get("id"))||null,!a.dataSharedCard&&null!==a.id&&(a.dataSharedCard=yield(0,h._)(a.saidaFrotaSrv.getById(a.id)))})()}carregarAcompanhantesSelecionados(a,r){var c=this;return(0,d.A)(function*(){try{const g=yield(0,h._)(c.acompanhanteFrotaSrv.getAll(a,r)),S=yield c.carregarAcompanhantes(),F=g.map(m=>S.find(N=>N.id===m.funcCod)).filter(m=>void 0!==m);for(const m of F)c.fotosAcompanhantesSelecionados[m.id]||(c.fotosAcompanhantesSelecionados[m.id]=yield c.getPhotoAcompanhante(m.id));return F}catch(g){return console.error("Erro ao carregar acompanhantes selecionados:",g),[]}})()}carregarAcompanhantes(){var a=this;return(0,d.A)(function*(){const r=a.funcionarioService.getCachedFuncionarios();return r&&r.length>0?r:yield(0,h._)(a.funcionarioService.getAll())})()}getPhotoAcompanhante(a){var r=this;return(0,d.A)(function*(){const c=yield r.identificacaoFuncSrv.getImage(a);return null!=c?c:"assets/user.png"})()}onBack(){this.router.navigate([this.appRoutes.list.path])}ngOnDestroy(){}}return(t=s).\u0275fac=function(a){return new(a||t)(n.rXU(A.w),n.rXU(M.H),n.rXU(R.r),n.rXU(C._),n.rXU(T.g),n.rXU(u.Ix),n.rXU(u.nX))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-finish"]],standalone:!0,features:[n.aNF],decls:33,vars:8,consts:[["listaAcompanhantesSelecionadosSaida",""],["mensagensAcompanhantesSaida",""],["listaAcompanhantesSelecionadosRetorno",""],["mensagensAcompanhantesRetorno",""],[3,"translucent"],["color","primary"],["slot","start"],["color","light",3,"click"],["name","arrow-back"],[3,"fullscreen"],[1,"box-content"],[1,"ion-justify-content-center","ion-align-items-center"],["size","auto"],[1,"foto-motorista"],["alt","Foto do motorista",3,"src"],[4,"ngIf"],[1,"lista-acompanhantes-saida"],[4,"ngTemplateOutlet"],[1,"lista-acompanhantes-retorno"],[3,"isFinished","data"],[4,"ngFor","ngForOf"],[3,"src","alt"],[2,"width","0","height","0",3,"disabled"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"]],template:function(a,r){if(1&a){const c=n.RV6();n.j41(0,"ion-header",4)(1,"ion-toolbar",5)(2,"ion-buttons",6)(3,"ion-button",7),n.bIt("click",function(){return n.eBV(c),n.Njj(r.onBack())}),n.nrm(4,"ion-icon",8),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6,"Percurso finalizado"),n.k0s()()(),n.j41(7,"ion-content",9)(8,"div",10)(9,"ion-grid")(10,"ion-row",11)(11,"ion-col",12)(12,"ion-avatar",13),n.nrm(13,"img",14),n.k0s()()()(),n.DNE(14,I,2,2,"ng-container",15),n.j41(15,"div",16)(16,"h4"),n.EFF(17,"Lista de acompanhantes na sa\xedda"),n.k0s(),n.DNE(18,U,1,0,"ng-container",17)(19,B,1,0,"ng-container",17),n.k0s(),n.j41(20,"div",18)(21,"h4"),n.EFF(22,"Lista de acompanhantes no retorno"),n.k0s(),n.DNE(23,G,1,0,"ng-container",17)(24,x,1,0,"ng-container",17),n.k0s(),n.DNE(25,y,2,1,"ng-template",null,0,n.C5r)(27,$,1,1,"ng-template",null,1,n.C5r)(29,K,2,1,"ng-template",null,2,n.C5r)(31,Y,1,1,"ng-template",null,3,n.C5r),n.k0s()()}if(2&a){const c=n.sdS(26),g=n.sdS(28),S=n.sdS(30),F=n.sdS(32);n.Y8G("translucent",!0),n.R7$(7),n.Y8G("fullscreen",!0),n.R7$(6),n.Y8G("src",r.srcFotoMotorista,n.B4B),n.R7$(),n.Y8G("ngIf",!!r.dataSharedCard),n.R7$(4),n.Y8G("ngTemplateOutlet",c),n.R7$(),n.Y8G("ngTemplateOutlet",g),n.R7$(4),n.Y8G("ngTemplateOutlet",S),n.R7$(),n.Y8G("ngTemplateOutlet",F)}},dependencies:[p.MD,p.Sq,p.bT,p.T3,o.bv,o.mC,o.Jm,o.QW,o.hU,o.W9,o.lO,o.eU,o.iq,o.$w,o.uz,o.he,o.nf,o.ln,o.BC,o.ai,o.Gw,E.i],styles:["ion-avatar.foto-motorista[_ngcontent-%COMP%]{height:200px;width:200px}ion-avatar.foto-motorista[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}ion-avatar[_ngcontent-%COMP%]{height:80px;width:80px;background-color:#fff;margin-top:1rem;border-radius:50%;margin-right:1rem;margin-bottom:1rem}ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}h4[_ngcontent-%COMP%]{text-align:center;font-weight:700}"]}),s})()},9769:(D,f,e)=>{e.d(f,{_:()=>v});var d=e(467),p=e(3207),o=e(4438),E=e(9684);let v=(()=>{var l;class h{constructor(_){this.baseApiService=_,this.endpoint="api/IdentificacaoFuncionario"}getImage(_){var P=this;return(0,d.A)(function*(){const O=yield(0,p.s)(P.baseApiService.get(`${P.endpoint}/GetImageFunc/${_}`,void 0,"blob"));return O?URL.createObjectURL(O):null})()}getAll(){return this.baseApiService.get(`${this.endpoint}/GetAll`)}save(_){return this.baseApiService.post(`${this.endpoint}/Save`,_)}}return(l=h).\u0275fac=function(_){return new(_||l)(o.KVO(E.v))},l.\u0275prov=o.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),h})()},3207:(D,f,e)=>{e.d(f,{s:()=>p});var d=e(9350);function p(o,E){const v="object"==typeof E;return new Promise((l,h)=>{let _,u=!1;o.subscribe({next:P=>{_=P,u=!0},error:h,complete:()=>{u?l(_):v?l(E.defaultValue):h(new d.G)}})})}}}]);