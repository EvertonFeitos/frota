"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8335],{8105:(O,f,e)=>{e.r(f),e.d(f,{FinishPage:()=>b});var l=e(467),m=e(177),i=e(4742),E=e(8663),P=e(3469),v=e(5964),h=e(4843),p=e(2902),F=e(5079),S=e(5873),D=e(5784),n=e(4438),C=e(2177),R=e(3459),M=e(2705),A=e(9769),T=e(9457);function B(t,s){if(1&t&&(n.qex(0),n.nrm(1,"app-card",19),n.bVm()),2&t){const o=n.XpG();n.R7$(),n.Y8G("isFinished",!0)("data",o.dataSharedCard)}}function U(t,s){1&t&&n.eu8(0)}function x(t,s){1&t&&n.eu8(0)}function I(t,s){1&t&&n.eu8(0)}function G(t,s){1&t&&n.eu8(0)}function y(t,s){if(1&t&&(n.j41(0,"ion-item")(1,"ion-avatar"),n.nrm(2,"img",21),n.k0s(),n.j41(3,"ion-label"),n.EFF(4),n.k0s(),n.nrm(5,"ion-input",22),n.k0s()),2&t){const o=s.$implicit,a=n.XpG(2);n.R7$(2),n.Mz_("alt","Foto de acompanhante ",o.name,""),n.Y8G("src",a.fotosAcompanhantesSelecionados[o.id],n.B4B),n.R7$(2),n.JRh(o.name),n.R7$(),n.Y8G("disabled",!0)}}function j(t,s){if(1&t&&(n.j41(0,"ion-list"),n.DNE(1,y,6,5,"ion-item",20),n.k0s()),2&t){const o=n.XpG();n.R7$(),n.Y8G("ngForOf",o.acompanhantesSelecionadosSaida)}}function $(t,s){1&t&&(n.j41(0,"p",24)(1,"strong"),n.EFF(2,"Nenhum acompanhante selecionado."),n.k0s()())}function L(t,s){if(1&t&&n.DNE(0,$,3,0,"p",23),2&t){const o=n.XpG();n.Y8G("ngIf",o.acompanhantesSelecionadosSaida.length<1)}}function W(t,s){if(1&t&&(n.j41(0,"ion-item")(1,"ion-avatar"),n.nrm(2,"img",21),n.k0s(),n.j41(3,"ion-label"),n.EFF(4),n.k0s(),n.nrm(5,"ion-input",22),n.k0s()),2&t){const o=s.$implicit,a=n.XpG(2);n.R7$(2),n.Mz_("alt","Foto de acompanhante ",o.name,""),n.Y8G("src",a.fotosAcompanhantesSelecionados[o.id],n.B4B),n.R7$(2),n.JRh(o.name),n.R7$(),n.Y8G("disabled",!0)}}function K(t,s){if(1&t&&(n.j41(0,"ion-list"),n.DNE(1,W,6,5,"ion-item",20),n.k0s()),2&t){const o=n.XpG();n.R7$(),n.Y8G("ngForOf",o.acompanhantesSelecionadosRetorno)}}function Y(t,s){1&t&&(n.j41(0,"p",24)(1,"strong"),n.EFF(2,"Nenhum acompanhante selecionado."),n.k0s()())}function X(t,s){if(1&t&&n.DNE(0,Y,3,0,"p",23),2&t){const o=n.XpG();n.Y8G("ngIf",o.acompanhantesSelecionadosRetorno.length<1)}}let b=(()=>{var t;class s{constructor(a,r,c,d,g,u,_){this.dataSharedCardSrv=a,this.acompanhanteFrotaSrv=r,this.funcionarioService=c,this.identificacaoFuncSrv=d,this.saidaFrotaSrv=g,this.router=u,this.route=_,this.appRoutes=D.S,this.acompanhantesSelecionadosSaida=[],this.acompanhantesSelecionadosRetorno=[],this.fotosAcompanhantesSelecionados={},this.id=null,this.srcFotoMotorista="assets/user.png",(0,F.a)({arrowBack:S.$$C})}ngOnInit(){var a=this;return(0,l.A)(function*(){var r;a.dataSharedCard=yield a.dataSharedCardSrv.getData(),yield a.updateRouteData(),a.id&&(a.acompanhantesSelecionadosSaida=yield a.carregarAcompanhantesSelecionados(a.id,P.E.Saida),a.acompanhantesSelecionadosRetorno=yield a.carregarAcompanhantesSelecionados(a.id,P.E.Retorno)),null!==(r=a.dataSharedCard)&&void 0!==r&&r.funcCod&&(a.srcFotoMotorista=yield a.getPhotoAcompanhante(a.dataSharedCard.funcCod)),a.routeSubscription=a.router.events.pipe((0,v.p)(c=>c instanceof p.wF)).subscribe((0,l.A)(function*(){return yield a.updateRouteData()}))})()}updateRouteData(){var a=this;return(0,l.A)(function*(){a.id=Number(a.route.snapshot.paramMap.get("id"))||null,!a.dataSharedCard&&null!==a.id&&(a.dataSharedCard=yield(0,h._)(a.saidaFrotaSrv.getById(a.id)))})()}carregarAcompanhantesSelecionados(a,r){var c=this;return(0,l.A)(function*(){try{const d=yield(0,h._)(c.acompanhanteFrotaSrv.getAll(a,r)),g=yield c.carregarAcompanhantes(),u=d.map(_=>g.find(k=>k.id===_.funcCod)).filter(_=>void 0!==_);for(const _ of u)c.fotosAcompanhantesSelecionados[_.id]||(c.fotosAcompanhantesSelecionados[_.id]=yield c.getPhotoAcompanhante(_.id));return u}catch(d){return console.error("Erro ao carregar acompanhantes selecionados:",d),[]}})()}carregarAcompanhantes(){var a=this;return(0,l.A)(function*(){const r=a.funcionarioService.getCachedFuncionarios();return r&&r.length>0?r:yield(0,h._)(a.funcionarioService.getAll())})()}getPhotoAcompanhante(a){var r=this;return(0,l.A)(function*(){const c=yield r.identificacaoFuncSrv.getImage(a);return null!=c?c:"assets/user.png"})()}onBack(){this.router.navigate([this.appRoutes.list.path])}ngOnDestroy(){}}return(t=s).\u0275fac=function(a){return new(a||t)(n.rXU(C.w),n.rXU(R.H),n.rXU(M.r),n.rXU(A._),n.rXU(T.g),n.rXU(p.Ix),n.rXU(p.nX))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-finish"]],standalone:!0,features:[n.aNF],decls:33,vars:8,consts:[["listaAcompanhantesSelecionadosSaida",""],["mensagensAcompanhantesSaida",""],["listaAcompanhantesSelecionadosRetorno",""],["mensagensAcompanhantesRetorno",""],[3,"translucent"],["color","primary"],["slot","start"],["color","light",3,"click"],["name","arrow-back"],[3,"fullscreen"],[1,"box-content"],[1,"ion-justify-content-center","ion-align-items-center"],["size","auto"],[1,"foto-motorista"],["alt","Foto do motorista",3,"src"],[4,"ngIf"],[1,"lista-acompanhantes-saida"],[4,"ngTemplateOutlet"],[1,"lista-acompanhantes-retorno"],[3,"isFinished","data"],[4,"ngFor","ngForOf"],[3,"src","alt"],[2,"width","0","height","0",3,"disabled"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"]],template:function(a,r){if(1&a){const c=n.RV6();n.j41(0,"ion-header",4)(1,"ion-toolbar",5)(2,"ion-buttons",6)(3,"ion-button",7),n.bIt("click",function(){return n.eBV(c),n.Njj(r.onBack())}),n.nrm(4,"ion-icon",8),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6,"Percurso finalizado"),n.k0s()()(),n.j41(7,"ion-content",9)(8,"div",10)(9,"ion-grid")(10,"ion-row",11)(11,"ion-col",12)(12,"ion-avatar",13),n.nrm(13,"img",14),n.k0s()()()(),n.DNE(14,B,2,2,"ng-container",15),n.j41(15,"div",16)(16,"h4"),n.EFF(17,"Lista de acompanhantes na sa\xedda"),n.k0s(),n.DNE(18,U,1,0,"ng-container",17)(19,x,1,0,"ng-container",17),n.k0s(),n.j41(20,"div",18)(21,"h4"),n.EFF(22,"Lista de acompanhantes no retorno"),n.k0s(),n.DNE(23,I,1,0,"ng-container",17)(24,G,1,0,"ng-container",17),n.k0s(),n.DNE(25,j,2,1,"ng-template",null,0,n.C5r)(27,L,1,1,"ng-template",null,1,n.C5r)(29,K,2,1,"ng-template",null,2,n.C5r)(31,X,1,1,"ng-template",null,3,n.C5r),n.k0s()()}if(2&a){const c=n.sdS(26),d=n.sdS(28),g=n.sdS(30),u=n.sdS(32);n.Y8G("translucent",!0),n.R7$(7),n.Y8G("fullscreen",!0),n.R7$(6),n.Y8G("src",r.srcFotoMotorista,n.B4B),n.R7$(),n.Y8G("ngIf",!!r.dataSharedCard),n.R7$(4),n.Y8G("ngTemplateOutlet",c),n.R7$(),n.Y8G("ngTemplateOutlet",d),n.R7$(4),n.Y8G("ngTemplateOutlet",g),n.R7$(),n.Y8G("ngTemplateOutlet",u)}},dependencies:[m.MD,m.Sq,m.bT,m.T3,i.bv,i.mC,i.Jm,i.QW,i.hU,i.W9,i.lO,i.eU,i.iq,i.$w,i.uz,i.he,i.nf,i.ln,i.BC,i.ai,i.Gw,E.i],styles:["ion-avatar.foto-motorista[_ngcontent-%COMP%]{height:200px;width:200px}ion-avatar.foto-motorista[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}ion-avatar[_ngcontent-%COMP%]{height:80px;width:80px;background-color:#fff;margin-top:1rem;border-radius:50%;margin-right:1rem;margin-bottom:1rem}ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}h4[_ngcontent-%COMP%]{text-align:center;font-weight:700}"]}),s})()},3207:(O,f,e)=>{e.d(f,{s:()=>m});var l=e(9350);function m(i,E){const P="object"==typeof E;return new Promise((v,h)=>{let F,p=!1;i.subscribe({next:S=>{F=S,p=!0},error:h,complete:()=>{p?v(F):P?v(E.defaultValue):h(new l.G)}})})}}}]);