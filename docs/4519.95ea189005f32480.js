"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4519],{8663:(D,u,a)=>{a.d(u,{i:()=>R});var n=a(467),d=a(177),c=a(7471),e=a(4742),s=a(5079),_=a(5873),o=a(4843),v=a(5784),t=a(4438),l=a(7106),h=a(3103),g=a(2553),E=a(2705),S=a(2177);function F(p,M){if(1&p){const f=t.RV6();t.j41(0,"div",4),t.bIt("click",function(){t.eBV(f);const i=t.XpG();return t.Njj(i.onEdit())}),t.nrm(1,"ion-img",5),t.k0s()}}function A(p,M){if(1&p){const f=t.RV6();t.j41(0,"div",4),t.bIt("click",function(){t.eBV(f);const i=t.XpG();return t.Njj(i.onFinish())}),t.nrm(1,"ion-img",6)(2,"div",7),t.k0s()}if(2&p){const f=t.XpG();t.R7$(2),t.xc7("background-color",f.status)}}let R=(()=>{var p;class M{constructor(r,i,O,P,m,C){this.frotaCarSrv=r,this.frotaMotivoSrv=i,this.frotaDestinoSrv=O,this.funcSrv=P,this.router=m,this.dataSharedCardSrv=C,this.hideButtonActions=!1,this.appRoutes=v.S,this.status="yellow",this.dataForRead={imobilizado:"",nomefuncionario:"",destino:"",motivo:""},(0,s.a)({"create-outline":_.hmR,"flag-outline":_.NBP})}ngOnInit(){var r=this;return(0,n.A)(function*(){try{r.dataForRead.id=r.data.id,r.dataForRead.dataHoraSaida=r.data.dataHoraSaida,r.dataForRead.dataHoraRetorno=r.data.dataHoraRetorno;const[i,O,P,m]=yield Promise.all([r.getImobilizado(),r.getNomeFuncionario(),r.getMotivo(),r.getDestino()]);r.dataForRead.imobilizado=i||"Descri\xe7\xe3o n\xe3o encontrada",r.dataForRead.nomefuncionario=O||"Funcion\xe1rio n\xe3o encontrado",r.dataForRead.motivo=P||"Motivo n\xe3o encontrado",r.dataForRead.destino=m||"Destino n\xe3o encontrado",r.dataForRead.dataHoraRetorno&&(r.status="red")}catch(i){console.error("Erro ao inicializar dados",i)}})()}onEdit(){this.dataSharedCardSrv.setData(this.data);const r=this.appRoutes.getPath(this.appRoutes.formEdit,{id:this.data.id});this.router.navigate([r])}onFinish(){if(!this.data.dataHoraRetorno){this.dataSharedCardSrv.setData(this.data);const r=this.appRoutes.getPath(this.appRoutes.formFinish,{id:this.data.id});this.router.navigate([r])}}getImobilizado(){var r=this;return(0,n.A)(function*(){try{return(yield(0,o._)(r.frotaCarSrv.getById(r.data.imobilizadoCod))).descricao}catch(i){return console.error("Erro ao obter imobilizado:",i),null}})()}getNomeFuncionario(){var r=this;return(0,n.A)(function*(){try{return(yield(0,o._)(r.funcSrv.getById(r.data.funcCod))).name||null}catch(i){return console.error("Erro ao obter nome do funcion\xe1rio:",i),null}})()}getMotivo(){var r=this;return(0,n.A)(function*(){try{return(yield(0,o._)(r.frotaMotivoSrv.getById(r.data.motivoSeq))).descricao}catch(i){return console.error("Erro ao obter motivo:",i),null}})()}getDestino(){var r=this;return(0,n.A)(function*(){try{return(yield(0,o._)(r.frotaDestinoSrv.getById(r.data.destinoSeq))).descricao}catch(i){return console.error("Erro ao obter destino:",i),null}})()}}return(p=M).\u0275fac=function(r){return new(r||p)(t.rXU(l.T),t.rXU(h.i),t.rXU(g.G),t.rXU(E.r),t.rXU(c.Ix),t.rXU(S.w))},p.\u0275cmp=t.VBU({type:p,selectors:[["app-card"]],inputs:{data:"data",hideButtonActions:"hideButtonActions"},standalone:!0,features:[t.aNF],decls:34,vars:14,consts:[["size","10"],["size","2",1,"icon-box"],["class","icon-width",3,"click",4,"ngIf"],[1,"ion-no-padding"],[1,"icon-width",3,"click"],["src","assets/edit.png"],["src","assets/flag.png"],[1,"retangulo"]],template:function(r,i){1&r&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-row")(3,"ion-col",0)(4,"ion-card-subtitle"),t.EFF(5),t.k0s(),t.j41(6,"ion-card-title"),t.EFF(7),t.k0s()(),t.j41(8,"ion-col",1),t.DNE(9,F,2,0,"div",2),t.k0s()()(),t.j41(10,"ion-card-content")(11,"ion-grid",3)(12,"ion-row")(13,"ion-col",0)(14,"p")(15,"strong"),t.EFF(16,"Motivo da sa\xedda:"),t.k0s(),t.EFF(17),t.k0s(),t.j41(18,"p")(19,"strong"),t.EFF(20,"Destino:"),t.k0s(),t.EFF(21),t.k0s(),t.j41(22,"p")(23,"strong"),t.EFF(24,"Data sa\xedda:"),t.k0s(),t.EFF(25),t.nI1(26,"date"),t.k0s(),t.j41(27,"p")(28,"strong"),t.EFF(29,"Data retorno:"),t.k0s(),t.EFF(30),t.nI1(31,"date"),t.k0s()(),t.j41(32,"ion-col",1),t.DNE(33,A,3,2,"div",2),t.k0s()()()()()),2&r&&(t.R7$(5),t.JRh(i.dataForRead.imobilizado),t.R7$(2),t.JRh(i.dataForRead.nomefuncionario),t.R7$(2),t.Y8G("ngIf",!i.dataForRead.dataHoraRetorno&&!i.hideButtonActions),t.R7$(8),t.SpI(" ",i.dataForRead.motivo,""),t.R7$(4),t.SpI(" ",i.dataForRead.destino,""),t.R7$(4),t.SpI(" ",t.i5U(26,8,i.dataForRead.dataHoraSaida,"dd/MM/yyyy, HH:mm"),""),t.R7$(5),t.SpI(" ",t.i5U(31,11,i.dataForRead.dataHoraRetorno,"dd/MM/yyyy, HH:mm")," "),t.R7$(3),t.Y8G("ngIf",!i.hideButtonActions))},dependencies:[e.bv,e.b_,e.I9,e.ME,e.HW,e.tN,e.hU,e.lO,e.KW,e.ln,c.iI,d.MD,d.bT,d.vh],styles:["[_nghost-%COMP%]{display:block;max-width:800px;margin:0 auto}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:12px;--padding-top: 7px;--padding-end: 8px;--padding-bottom: 8px;--padding-start: 8px;border-radius:8px}[_nghost-%COMP%]   .icon-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .icon-box[_ngcontent-%COMP%]   .icon-width[_ngcontent-%COMP%]{width:27px}[_nghost-%COMP%]   .retangulo[_ngcontent-%COMP%]{margin-top:3px;width:100%;height:4px}"]}),M})()},2553:(D,u,a)=>{a.d(u,{G:()=>c});var n=a(4438),d=a(9684);let c=(()=>{var e;class s{constructor(o){this.baseApiService=o,this.endpoint="api/DestinoFrota"}getById(o){return this.baseApiService.get(`${this.endpoint}/GetById/${o}`)}getAll(){return this.baseApiService.get(`${this.endpoint}/GetAll`)}save(o){return this.baseApiService.post(`${this.endpoint}/Save`,o)}update(o,v){return this.baseApiService.post(`${this.endpoint}/Update/${o}`,v)}}return(e=s).\u0275fac=function(o){return new(o||e)(n.KVO(d.v))},e.\u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),s})()},3103:(D,u,a)=>{a.d(u,{i:()=>c});var n=a(4438),d=a(9684);let c=(()=>{var e;class s{constructor(o){this.baseApiService=o,this.endpoint="api/MotivoSaidaFrota"}getById(o){return this.baseApiService.get(`${this.endpoint}/GetById/${o}`)}getAll(){return this.baseApiService.get(`${this.endpoint}/GetAll`)}save(o){return this.baseApiService.post(`${this.endpoint}/Save`,o)}update(o,v){return this.baseApiService.post(`${this.endpoint}/Update/${o}`,v)}}return(e=s).\u0275fac=function(o){return new(o||e)(n.KVO(d.v))},e.\u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),s})()},9457:(D,u,a)=>{a.d(u,{g:()=>c});var n=a(4438),d=a(9684);let c=(()=>{var e;class s{constructor(o){this.baseApiService=o,this.endpoint="api/SaidaFrota"}getById(o){return this.baseApiService.get(`${this.endpoint}/GetById/${o}`)}getAll(o,v){return this.baseApiService.get(`${this.endpoint}/GetAllPaginated?page=${o}&pageSize=${v}`)}save(o){return this.baseApiService.post(`${this.endpoint}/Save`,o)}update(o,v){return this.baseApiService.post(`${this.endpoint}/Update/${o}`,v)}}return(e=s).\u0275fac=function(o){return new(o||e)(n.KVO(d.v))},e.\u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),s})()},7106:(D,u,a)=>{a.d(u,{T:()=>c});var n=a(4438),d=a(9684);let c=(()=>{var e;class s{constructor(o){this.baseApiService=o,this.endpoint="api/CarFrota"}getById(o){return this.baseApiService.get(`${this.endpoint}/GetById/${o}`)}getAll(){return this.baseApiService.get(`${this.endpoint}/GetAll`)}getAllWithoutRoutesOpen(){return this.baseApiService.get(`${this.endpoint}/GetAllWithoutRoutesOpen`)}}return(e=s).\u0275fac=function(o){return new(o||e)(n.KVO(d.v))},e.\u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),s})()},2705:(D,u,a)=>{a.d(u,{r:()=>_});var n=a(4412),d=a(1985),c=a(8141),e=a(4438),s=a(9684);let _=(()=>{var o;class v{constructor(l){this.baseApiService=l,this.endpoint="api/Funcionario",this.funcionariosSubject=new n.t(null),this.funcionarios$=this.funcionariosSubject.asObservable()}getAll(){return this.baseApiService.get(`${this.endpoint}/GetAll`).pipe((0,c.M)(l=>{this.funcionariosSubject.next(l)}))}getCachedFuncionarios(){return this.funcionariosSubject.value}clearCache(){this.funcionariosSubject.next(null)}getById(l){return new d.c(h=>{const g=this.getCachedFuncionarios();if(g){const E=g.find(S=>S.id===l);if(E)return h.next(E),void h.complete()}this.getAll().subscribe({next:E=>{const S=E.find(F=>F.id===l);S?h.next(S):h.error(new Error(`Funcion\xe1rio com ID ${l} n\xe3o encontrado.`)),h.complete()},error:E=>{h.error(E)}})})}}return(o=v).\u0275fac=function(l){return new(l||o)(e.KVO(s.v))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),v})()},2177:(D,u,a)=>{a.d(u,{w:()=>c});var n=a(4412),d=a(4438);let c=(()=>{var e;class s{constructor(){this.dataSubject=new n.t(null),this.data$=this.dataSubject.asObservable()}setData(o){this.dataSubject.next(o)}getData(){return this.dataSubject.value}}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275prov=d.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),s})()},4843:(D,u,a)=>{a.d(u,{_:()=>c});var n=a(9350),d=a(7707);function c(e,s){const _="object"==typeof s;return new Promise((o,v)=>{const t=new d.Ms({next:l=>{o(l),t.unsubscribe()},error:v,complete:()=>{_?o(s.defaultValue):v(new n.G)}});e.subscribe(t)})}}}]);