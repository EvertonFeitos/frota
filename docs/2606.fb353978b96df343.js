"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2606],{2606:(g,m,c)=>{c.r(m),c.d(m,{CameraPreviewWeb:()=>v});var r=c(467),p=c(5083);class v extends p.E_{constructor(){super({name:"CameraPreview",platforms:["web"]})}start(e){var n=this;return(0,r.A)(function*(){return new Promise(function(){var s=(0,r.A)(function*(a,i){var o;yield navigator.mediaDevices.getUserMedia({audio:!e.disableAudio,video:!0}).then(t=>{t.getTracks().forEach(u=>u.stop())}).catch(t=>{i(t)});const d=document.getElementById("video"),f=document.getElementById(e.parent);if(d)i({message:"camera already started"});else{const t=document.createElement("video");t.id="video",t.setAttribute("class",e.className||""),"rear"!==e.position&&t.setAttribute("style","-webkit-transform: scaleX(-1); transform: scaleX(-1);");const u=navigator.userAgent.toLowerCase();if(u.includes("safari")&&!u.includes("chrome")&&(t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true")),f.appendChild(t),null!==(o=navigator.mediaDevices)&&void 0!==o&&o.getUserMedia){const h={video:{width:{ideal:e.width},height:{ideal:e.height}}};"rear"===e.position?(h.video.facingMode="environment",n.isBackCamera=!0):n.isBackCamera=!1,navigator.mediaDevices.getUserMedia(h).then(function(l){t.srcObject=l,t.play(),a()},l=>{i(l)})}}});return function(a,i){return s.apply(this,arguments)}}())})()}startRecordVideo(){var e=this;return(0,r.A)(function*(){throw e.unimplemented("Not implemented on web.")})()}stopRecordVideo(){var e=this;return(0,r.A)(function*(){throw e.unimplemented("Not implemented on web.")})()}stop(){return(0,r.A)(function*(){const e=document.getElementById("video");if(e){e.pause();const s=e.srcObject.getTracks();for(const a of s)a.stop();e.remove()}})()}capture(e){var n=this;return(0,r.A)(function*(){return new Promise(s=>{const a=document.getElementById("video"),i=document.createElement("canvas"),o=i.getContext("2d");let d;i.width=a.videoWidth,i.height=a.videoHeight,n.isBackCamera||(o.translate(a.videoWidth,0),o.scale(-1,1)),o.drawImage(a,0,0,a.videoWidth,a.videoHeight),d=null!=e.quality?i.toDataURL("image/jpeg",e.quality/100).replace("data:image/jpeg;base64,",""):i.toDataURL("image/png").replace("data:image/png;base64,",""),s({value:d})})})()}captureSample(e){var n=this;return(0,r.A)(function*(){return n.capture(e)})()}getSupportedFlashModes(){return(0,r.A)(function*(){throw new Error("getSupportedFlashModes not supported under the web platform")})()}setFlashMode(e){return(0,r.A)(function*(){throw new Error("setFlashMode not supported under the web platform")})()}flip(){return(0,r.A)(function*(){throw new Error("flip not supported under the web platform")})()}setOpacity(e){return(0,r.A)(function*(){const n=document.getElementById("video");n&&e.opacity&&n.style.setProperty("opacity",e.opacity.toString())})()}isCameraStarted(){var e=this;return(0,r.A)(function*(){throw e.unimplemented("Not implemented on web.")})()}}}}]);